<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BackOffice</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="../styles/index.css" />
  </head>
  <body>
    <header>
      <nav id="navbar" class="container-fluid bg-primary shadow">
        <div class="d-flex p-3">
          <div class="hover-link">
            <a
              class="px-4 text-white text-decoration-none"
              href="../../index.html"
              >Acceuil</a
            >
          </div>
          <div class="hover-link">
            <a
              class="px-4 text-white text-decoration-none"
              href="inscription.html"
              >Inscription</a
            >
          </div>
          <div class="hover-link">
            <a
              class="px-4 text-white text-decoration-none"
              href="connexion.html"
              >Connexion</a
            >
          </div>
          <div class="hover-link">
            <a
              class="px-4 text-white text-decoration-none"
              href="calendrier.html"
              >Calendrier</a
            >
          </div>
          <div class="hover-link">
            <a
              class="px-4 text-white text-decoration-none"
              href="backoffice.html"
              >BackOffice</a
            >
          </div>
        </div>
      </nav>
    </header>
    <main
      class="container-fluid mt-3 mb-5 pt-3 pb-5 d-flex flex-column align-items-center"
    >
      <h1>La Plateforme_</h1>
      <div class="m-3 text-center">
        pour voir les données récupérer du JSON <br />ouvrir avec "open with
        live server", chrome bloque l'accès
      </div>

      <h2>Répertoire</h2>
      <div class="container m-2">
        <table
          id="request-table"
          class="table table-striped table-bordered table-hover"
        >
          <thead class="table table-dark text-center">
            <tr>
              <th>Nom</th>
              <th>Prénom</th>
              <th>Email</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody class="text-center align-middle"></tbody>
        </table>
        <script>
          function getDataJSON() {
            fetch("../js/data.json")
              .then((response) => response.json())
              .then((data) => {
                addRequestToTable(data);
              })
              .catch((error) => {
                console.error("error");
              });
          }

          function addRequestToTable(requestsData) {
            const tableBody = document.querySelector("#request-table tbody");
            requestsData.forEach((requests) => {
              const row = document.createElement("tr");
              row.innerHTML = `
                    <td>${requests.nom}</td>
                    <td>${requests.prenom}</td>
                    <td>${requests.email}</td>
                    <td>
                      <div class="container d-flex flex-row m-2">
                        <select class="action-select form-select">
                            <option value="accept"> --- </option>
                            <option value="accept">Utilisateurs</option>
                            <option value="accept">Modérateur</option>
                            <option value="accept">Administrateur</option>
                        </select>
                        <button typ="button" class="btn bg-primary-subtle shadow-sm"><i class="bi bi-check"></i></button>
                      </div>
                `;
              tableBody.appendChild(row);
            });
          }
          document.addEventListener("DOMContentLoaded", getDataJSON);
        </script>
      </div>
    </main>
    <footer class="sticky-bottom bg-primary p-2">
      <nav id="footnav" class="container-fluid row text-center">
        <div class="container p-2">
          <a
            class="text-white text-decoration-none foot-hover"
            href="../../index.html"
            >Acceuil</a
          >
        </div>
        <div class="container p-2">
          <a
            class="text-white text-decoration-none foot-hover"
            href="inscription.html"
            >Inscription</a
          >
        </div>
        <div class="container p-2">
          <a
            class="text-white text-decoration-none foot-hover"
            href="connexion.html"
            >Connexion</a
          >
        </div>
        <div class="container p-2">
          <a
            class="text-white text-decoration-none foot-hover"
            href="calendrier.html"
            >Calendrier</a
          >
        </div>
        <div class="container p-2">
          <a
            class="text-white text-decoration-none foot-hover"
            href="backoffice.html"
            >BackOffice</a
          >
        </div>
      </nav>
    </footer>
  </body>
</html>
